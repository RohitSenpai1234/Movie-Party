{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rohit\\\\OneDrive\\\\Desktop\\\\SrtreamMovie\\\\Movie-Party\\\\frontend\\\\src\\\\components\\\\VideoPlayer_v3.js\",\n  _s = $RefreshSig$();\n/**\r\n * VideoPlayer_v3.js  (v4 architecture, kept as v3 filename for compatibility)\r\n *\r\n * Key improvements over previous version:\r\n *  - Uses useWebRTC hook for all RTCPeerConnection logic (ICE buffering, perfect negotiation)\r\n *  - Uses useVideoSync hook for latency-compensated sync (RTT + playback rate adjustment)\r\n *  - Fixes audio: uses video.captureStream() for file playback (not canvas â€” canvas has no audio)\r\n *  - Fixes flicker: srcObject only assigned when stream ID changes\r\n *  - Prevents re-renders: conn status uses useRef + direct DOM mutation, not useState\r\n *  - All event handlers wrapped in useCallback to avoid re-registration on every render\r\n *  - Viewer controls are read-only overlays (no native controls) to prevent echo events\r\n */\n\nimport React, { useEffect, useRef, useState, useCallback, useMemo } from \"react\";\nimport socket from \"../socket\";\nimport { useWebRTC } from \"../hooks/useWebRTC\";\nimport { useVideoSync } from \"../hooks/useVideoSync\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VideoPlayer({\n  roomId,\n  username = \"Viewer\"\n}) {\n  _s();\n  const videoRef = useRef(null);\n  const videoContainerRef = useRef(null);\n  const statusDotRef = useRef(null); // DOM ref for status indicator â€” avoids re-render\n  const statusTextRef = useRef(null);\n  const controlsTimeoutRef = useRef(null);\n\n  // Stream role state (drives conditional rendering â€” OK to be state)\n  const [isStreaming, setIsStreaming] = useState(false);\n  const [streamerId, setStreamerId] = useState(null);\n  const [needsInteraction, setNeedsInteraction] = useState(false);\n  const [videoSource, setVideoSource] = useState(null);\n  const [userList, setUserList] = useState([]);\n\n  // Local UI state (local only, not synced)\n  const [volume, setVolume] = useState(1);\n  const [isMuted, setIsMuted] = useState(false);\n  const [isFullscreen, setIsFullscreen] = useState(false);\n  const [showControls, setShowControls] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  // We keep local time state only for the host to handle its own slider interaction smoothly\n  // Viewers will strictly use roomTime from the sync hook.\n  const [localSeekTime, setLocalSeekTime] = useState(0);\n  const [isSeeking, setIsSeeking] = useState(false);\n  const cleanRoomId = useMemo(() => roomId ? roomId.trim().toUpperCase() : \"\", [roomId]);\n  const amIStreamer = streamerId === socket.id;\n\n  // â”€â”€ Update status indicator without triggering re-render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const setStatus = useCallback((text, isLive = false) => {\n    if (statusTextRef.current) statusTextRef.current.textContent = text;\n    if (statusDotRef.current) {\n      statusDotRef.current.style.background = isLive ? \"#4caf50\" : \"#ffc107\";\n    }\n  }, []);\n\n  // â”€â”€ WebRTC hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const {\n    startStream,\n    stopStream,\n    remoteStream,\n    peerStates,\n    usingFallback\n  } = useWebRTC({\n    roomId: cleanRoomId,\n    socket\n  });\n\n  // â”€â”€ Sync hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const {\n    emitPlay,\n    emitPause,\n    emitSeek,\n    emitVolumeChange,\n    startHeartbeat,\n    stopHeartbeat,\n    isSyncing,\n    roomTime,\n    roomDuration\n  } = useVideoSync({\n    socket,\n    roomId: cleanRoomId,\n    videoRef,\n    isHost: amIStreamer\n  });\n\n  // Sync internal state for host's seek bar when not interacting\n  useEffect(() => {\n    if (amIStreamer && !isSeeking) {\n      setLocalSeekTime(roomTime);\n    }\n  }, [roomTime, amIStreamer, isSeeking]);\n\n  // â”€â”€ Assign remote stream to video element (viewer side) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  useEffect(() => {\n    var _video$srcObject;\n    const video = videoRef.current;\n    if (!video || !remoteStream || amIStreamer) return;\n    // Only reassign if stream actually changed â†’ prevents flicker\n    if (((_video$srcObject = video.srcObject) === null || _video$srcObject === void 0 ? void 0 : _video$srcObject.id) === remoteStream.id) return;\n    console.log(\"[VideoPlayer] Assigning remote stream to video element\");\n    video.srcObject = remoteStream;\n    const tryPlay = () => {\n      if (!video.paused) return;\n      video.play().then(() => {\n        setStatus(\"Live\", true);\n        setNeedsInteraction(false);\n        setIsPlaying(true);\n      }).catch(e => {\n        if (e.name === \"NotAllowedError\") {\n          // Browser blocked autoplay â€” show click-to-play overlay\n          video.muted = true;\n          video.play().then(() => {\n            setStatus(\"Live (Muted â€” click ðŸ”Š)\", true);\n            setNeedsInteraction(false);\n            setIsPlaying(true);\n          }).catch(() => {\n            setStatus(\"Click to Play\", false);\n            setNeedsInteraction(true);\n            setIsPlaying(false);\n          });\n        }\n      });\n    };\n    video.onloadedmetadata = tryPlay;\n    tryPlay();\n    return () => {\n      video.onloadedmetadata = null;\n    };\n  }, [remoteStream, amIStreamer, setStatus]);\n\n  // â”€â”€ Update status when peer connection status changes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  useEffect(() => {\n    const states = Object.values(peerStates);\n    if (states.includes(\"connected\")) {\n      setStatus(amIStreamer ? \"Hosting\" : \"Live\", true);\n    } else if (states.includes(\"connecting\")) {\n      setStatus(\"Connectingâ€¦\", false);\n    } else if (states.includes(\"failed\")) {\n      setStatus(usingFallback ? \"Sync Only (WebRTC failed)\" : \"Failed\", false);\n    }\n  }, [peerStates, amIStreamer, usingFallback, setStatus]);\n\n  // â”€â”€ Socket room events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  useEffect(() => {\n    if (!cleanRoomId) return;\n    const handleStreamStatus = ({\n      isStreaming: active,\n      streamerId: id\n    }) => {\n      setIsStreaming(active);\n      setStreamerId(id);\n      if (active && id !== socket.id) {\n        setStatus(\"Connectingâ€¦\", false);\n        // Ask new host to initiate WebRTC connection to us\n        setTimeout(() => socket.emit(\"request-stream\", cleanRoomId), 400);\n        // Also request latest sync state\n        socket.emit(\"request-sync\", cleanRoomId);\n      }\n    };\n    const handleStreamStarted = ({\n      streamerId: id\n    }) => {\n      setIsStreaming(true);\n      setStreamerId(id);\n      if (id !== socket.id) {\n        setStatus(\"Connectingâ€¦\", false);\n        setTimeout(() => socket.emit(\"request-stream\", cleanRoomId), 400);\n        socket.emit(\"request-sync\", cleanRoomId);\n      }\n    };\n    const handleStreamStopped = () => {\n      setIsStreaming(false);\n      setStreamerId(null);\n      setNeedsInteraction(false);\n      setStatus(\"Idle\", false);\n      stopStream();\n      const video = videoRef.current;\n      if (video) {\n        video.srcObject = null;\n        video.src = \"\";\n        video.pause();\n      }\n    };\n    const handleUserList = list => setUserList(list);\n    socket.on(\"stream-status\", handleStreamStatus);\n    socket.on(\"stream-started\", handleStreamStarted);\n    socket.on(\"stream-stopped\", handleStreamStopped);\n    socket.on(\"user-list\", handleUserList);\n    socket.emit(\"join-room\", {\n      roomId: cleanRoomId,\n      username: \"Viewer\"\n    });\n    return () => {\n      socket.off(\"stream-status\", handleStreamStatus);\n      socket.off(\"stream-started\", handleStreamStarted);\n      socket.off(\"stream-stopped\", handleStreamStopped);\n      socket.off(\"user-list\", handleUserList);\n    };\n  }, [cleanRoomId, setStatus, stopStream]);\n\n  // â”€â”€ Capture stream from local video file â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  // Uses video.captureStream() which captures decoded audio + video directly.\n  // captureStream() MUST be called after the video has started playing â€”\n  // calling it on a paused/unstarted video returns empty/inactive tracks.\n  const beginFileStream = useCallback(videoEl => {\n    if (!videoEl.captureStream && !videoEl.mozCaptureStream) {\n      console.error(\"[VideoPlayer] captureStream() not supported in this browser\");\n      return;\n    }\n\n    // Wait 200 ms after play() so the decoder produces live track frames\n    // before we hand the stream to RTCPeerConnection.\n    setTimeout(() => {\n      var _videoEl$captureStrea, _videoEl$captureStrea2, _videoEl$mozCaptureSt;\n      const stream = (_videoEl$captureStrea = (_videoEl$captureStrea2 = videoEl.captureStream) === null || _videoEl$captureStrea2 === void 0 ? void 0 : _videoEl$captureStrea2.call(videoEl)) !== null && _videoEl$captureStrea !== void 0 ? _videoEl$captureStrea : (_videoEl$mozCaptureSt = videoEl.mozCaptureStream) === null || _videoEl$mozCaptureSt === void 0 ? void 0 : _videoEl$mozCaptureSt.call(videoEl);\n      const tracks = stream.getTracks();\n      console.log(\"[VideoPlayer] captureStream tracks:\", tracks.map(t => `${t.kind}:${t.readyState}`));\n      if (tracks.length === 0) {\n        console.error(\"[VideoPlayer] captureStream() returned no tracks! Video may not be playing.\");\n        return;\n      }\n      const videoTracks = stream.getVideoTracks();\n      const audioTracks = stream.getAudioTracks();\n      if (audioTracks.length === 0) {\n        console.warn(\"[VideoPlayer] No audio track captured (file may have no audio, or browser restriction).\");\n      }\n\n      // Hint the browser codec selection: \"motion\" is better for video files\n      videoTracks.forEach(t => {\n        try {\n          t.contentHint = \"motion\";\n        } catch (_) {}\n      });\n      audioTracks.forEach(t => {\n        try {\n          t.contentHint = \"music\";\n        } catch (_) {}\n      });\n      startStream(stream);\n      socket.emit(\"start-stream\", cleanRoomId);\n      setStatus(\"Hosting File\", true);\n      startHeartbeat();\n\n      // HOST-side video event listeners\n      let lastPlayState = null;\n      videoEl.onplay = () => {\n        setIsPlaying(true);\n        if (lastPlayState === \"playing\") return;\n        lastPlayState = \"playing\";\n        emitPlay();\n      };\n      videoEl.onpause = () => {\n        setIsPlaying(false);\n        if (lastPlayState === \"paused\") return;\n        lastPlayState = \"paused\";\n        emitPause();\n      };\n      videoEl.onseeked = () => {\n        emitSeek(videoEl.currentTime);\n      };\n      videoEl.onvolumechange = () => {\n        emitVolumeChange({\n          muted: videoEl.muted,\n          volume: videoEl.volume\n        });\n      };\n\n      // Initial duration for host state\n      setLocalSeekTime(videoEl.currentTime);\n\n      // â€” Initial Pause â€”\n      // The user wants the video to be paused initially after adding it.\n      // We play it briefly just to ensure captureStream tracks are active,\n      // then pause it so the user can click \"Play/Resume\" manually.\n      videoEl.pause();\n    }, 200);\n  }, [cleanRoomId, startStream, startHeartbeat, emitPlay, emitPause, emitSeek, emitVolumeChange, setStatus]);\n\n  // â”€â”€ File input handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleFileChange = useCallback(event => {\n    const file = event.target.files[0];\n    if (!file) return;\n    const url = URL.createObjectURL(file);\n    setVideoSource(url);\n    setIsStreaming(true);\n    setStreamerId(socket.id);\n\n    // Let state update propagate before accessing video element\n    requestAnimationFrame(() => {\n      const video = videoRef.current;\n      if (!video) return;\n      video.src = url;\n      video.onloadedmetadata = () => {\n        video.play().then(() => {\n          beginFileStream(video);\n        }).catch(err => console.error(\"[VideoPlayer] File play error:\", err));\n      };\n    });\n  }, [beginFileStream]);\n\n  // â”€â”€ Screen share handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const startScreenShare = useCallback(async () => {\n    try {\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        video: {\n          width: {\n            ideal: 1920\n          },\n          height: {\n            ideal: 1080\n          },\n          frameRate: {\n            ideal: 30\n          }\n        },\n        audio: true\n      });\n      startStream(stream);\n      socket.emit(\"start-stream\", cleanRoomId);\n      setIsStreaming(true);\n      setStreamerId(socket.id);\n      setStatus(\"Hosting Screen\", true);\n      startHeartbeat();\n\n      // Show local preview\n      const video = videoRef.current;\n      if (video) {\n        video.srcObject = stream;\n        video.play().catch(() => {});\n      }\n\n      // Detect when user stops screen share via browser UI\n      stream.getVideoTracks()[0].onended = () => {\n        handleStopStreaming();\n      };\n    } catch (err) {\n      console.error(\"[VideoPlayer] Screen share error:\", err);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [cleanRoomId, startStream, startHeartbeat, setStatus]);\n\n  // â”€â”€ Stop streaming handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleStopStreaming = useCallback(() => {\n    stopStream();\n    stopHeartbeat();\n    socket.emit(\"stop-stream\", cleanRoomId);\n    const video = videoRef.current;\n    if (video) {\n      video.srcObject = null;\n      video.src = \"\";\n      video.pause();\n      video.onplay = null;\n      video.onpause = null;\n      video.onseeked = null;\n      video.onvolumechange = null;\n    }\n    setVideoSource(null);\n    setIsStreaming(false);\n    setStreamerId(null);\n    setStatus(\"Idle\", false);\n  }, [cleanRoomId, stopStream, stopHeartbeat, setStatus]);\n\n  // â”€â”€ Click-to-play overlay handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleClickToPlay = useCallback(() => {\n    const video = videoRef.current;\n    if (!video) return;\n    video.muted = false;\n    video.play().then(() => {\n      setNeedsInteraction(false);\n      setStatus(\"Live\", true);\n    }).catch(() => {\n      video.muted = true;\n      video.play().catch(() => {});\n      setNeedsInteraction(false);\n      setStatus(\"Live (Muted)\", true);\n    });\n  }, [setStatus]);\n\n  // â”€â”€ Auto-hide controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleMouseMove = useCallback(() => {\n    setShowControls(true);\n    if (controlsTimeoutRef.current) clearTimeout(controlsTimeoutRef.current);\n    controlsTimeoutRef.current = setTimeout(() => {\n      setShowControls(false);\n    }, 3000);\n  }, []);\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      setIsFullscreen(!!document.fullscreenElement);\n    };\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n    return () => {\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n      if (controlsTimeoutRef.current) clearTimeout(controlsTimeoutRef.current);\n    };\n  }, []);\n  const toggleFullscreen = useCallback(() => {\n    if (!videoContainerRef.current) return;\n    if (!document.fullscreenElement) {\n      videoContainerRef.current.requestFullscreen().catch(err => {\n        console.error(`Error attempting to enable full-screen mode: ${err.message}`);\n      });\n    } else {\n      document.exitFullscreen();\n    }\n  }, []);\n  const handleLocalVolumeChange = useCallback(e => {\n    const newVol = parseFloat(e.target.value);\n    setVolume(newVol);\n    if (videoRef.current) {\n      videoRef.current.volume = newVol;\n      videoRef.current.muted = newVol === 0;\n      setIsMuted(newVol === 0);\n    }\n  }, []);\n  const toggleMute = useCallback(() => {\n    if (!videoRef.current) return;\n    const nextMuted = !isMuted;\n    setIsMuted(nextMuted);\n    videoRef.current.muted = nextMuted;\n    if (!nextMuted && volume === 0) {\n      setVolume(0.5);\n      videoRef.current.volume = 0.5;\n    }\n  }, [isMuted, volume]);\n  const formatTime = seconds => {\n    if (!seconds) return \"0:00\";\n    const h = Math.floor(seconds / 3600);\n    const m = Math.floor(seconds % 3600 / 60);\n    const s = Math.floor(seconds % 60);\n    return h > 0 ? `${h}:${m.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}` : `${m}:${s.toString().padStart(2, \"0\")}`;\n  };\n  const togglePlay = useCallback(() => {\n    const video = videoRef.current;\n    if (!video || !amIStreamer) return;\n    if (video.paused) {\n      video.play().catch(console.error);\n    } else {\n      video.pause();\n    }\n  }, [amIStreamer]);\n  const handleSeekChange = useCallback(e => {\n    const video = videoRef.current;\n    if (!video || !amIStreamer) return;\n    const newTime = parseFloat(e.target.value);\n    setLocalSeekTime(newTime);\n    setIsSeeking(true);\n    // Don't update video.currentTime here to avoid lag; do it on mouseUp or use a debounce\n    // Actually, updating currentTime here gives better visual feedback if the video is fast.\n    video.currentTime = newTime;\n  }, [amIStreamer]);\n  const handleSeekEnd = useCallback(() => {\n    setIsSeeking(false);\n  }, []);\n\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: videoContainerRef,\n    onMouseMove: handleMouseMove,\n    style: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      background: \"#000\",\n      position: \"relative\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"8px 16px\",\n        background: \"rgba(0,0,0,0.85)\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\",\n        fontSize: \"0.78rem\",\n        borderBottom: \"1px solid var(--border-color, #333)\",\n        flexShrink: 0,\n        zIndex: 5\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          alignItems: \"center\",\n          gap: \"8px\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          ref: statusDotRef,\n          style: {\n            width: 8,\n            height: 8,\n            borderRadius: \"50%\",\n            background: \"#ffc107\",\n            flexShrink: 0\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 514,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: \"var(--text-secondary, #aaa)\"\n          },\n          children: \"Status:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          ref: statusTextRef,\n          style: {\n            color: \"var(--accent-color, #d4af37)\",\n            fontWeight: \"bold\"\n          },\n          children: \"Idle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 11\n        }, this), usingFallback && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 8,\n            fontSize: \"0.68rem\",\n            color: \"#ff9800\",\n            border: \"1px solid #ff9800\",\n            padding: \"1px 5px\",\n            borderRadius: 3\n          },\n          children: \"Sync-only mode\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 532,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 513,\n        columnNumber: 9\n      }, this), isStreaming ? amIStreamer && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleStopStreaming,\n        className: \"royal-button\",\n        style: {\n          padding: \"4px 12px\",\n          fontSize: \"0.72rem\",\n          background: \"#dc3545\",\n          color: \"#fff\",\n          border: \"none\",\n          borderRadius: 4,\n          cursor: \"pointer\"\n        },\n        children: \"Stop Streaming\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 550,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          gap: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          accept: \"video/*\",\n          onChange: handleFileChange,\n          style: {\n            display: \"none\"\n          },\n          id: \"video-upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 568,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"video-upload\",\n          className: \"royal-button\",\n          style: {\n            padding: \"4px 12px\",\n            fontSize: \"0.72rem\",\n            cursor: \"pointer\"\n          },\n          children: \"\\uD83D\\uDCC1 Local File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startScreenShare,\n          className: \"royal-button\",\n          style: {\n            padding: \"4px 12px\",\n            fontSize: \"0.72rem\",\n            background: \"transparent\",\n            border: \"1px solid var(--accent-color, #d4af37)\",\n            color: \"var(--accent-color, #d4af37)\",\n            borderRadius: 4,\n            cursor: \"pointer\"\n          },\n          children: \"\\uD83D\\uDDA5 Screen Share\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 586,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 567,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        position: \"relative\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        background: \"#000\",\n        overflow: \"hidden\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        ref: videoRef,\n        src: videoSource || undefined,\n        style: {\n          width: \"100%\",\n          height: isFullscreen ? \"100vh\" : \"auto\",\n          maxHeight: isFullscreen ? \"100vh\" : \"70vh\",\n          objectFit: \"contain\"\n        },\n        controls: false // Custom controls instead\n        ,\n        autoPlay: true,\n        playsInline: true,\n        muted: amIStreamer && !!videoSource // host mutes self to avoid echo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 617,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          bottom: isFullscreen ? 30 : 20,\n          left: \"50%\",\n          transform: `translate(-50%, ${showControls ? \"0\" : \"100px\"})`,\n          width: \"calc(100% - 40px)\",\n          maxWidth: \"900px\",\n          padding: \"16px 24px\",\n          background: \"rgba(10, 10, 10, 0.75)\",\n          backdropFilter: \"blur(16px)\",\n          borderRadius: \"16px\",\n          border: \"1px solid rgba(255,255,255,0.08)\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          gap: \"12px\",\n          transition: \"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s\",\n          opacity: showControls ? 1 : 0,\n          zIndex: 100,\n          boxShadow: \"0 12px 40px rgba(0,0,0,0.6)\"\n        },\n        children: [amIStreamer && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: \"100%\",\n            display: \"flex\",\n            alignItems: \"center\",\n            position: \"relative\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: roomDuration || 100,\n            step: \"0.1\",\n            value: localSeekTime,\n            onChange: handleSeekChange,\n            onMouseUp: handleSeekEnd,\n            onTouchEnd: handleSeekEnd,\n            style: {\n              width: \"100%\",\n              height: \"5px\",\n              borderRadius: \"5px\",\n              background: `linear-gradient(to right, #ff0000 0%, #ff0000 ${roomDuration > 0 ? localSeekTime / roomDuration * 100 : 0}%, #444 ${roomDuration > 0 ? localSeekTime / roomDuration * 100 : 0}%, #444 100%)`,\n              outline: \"none\",\n              cursor: \"pointer\",\n              appearance: \"none\",\n              WebkitAppearance: \"none\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 658,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 657,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"18px\"\n            },\n            children: [amIStreamer && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: togglePlay,\n              style: {\n                background: \"none\",\n                border: \"none\",\n                cursor: \"pointer\",\n                padding: 0,\n                display: \"flex\",\n                alignItems: \"center\",\n                color: \"white\"\n              },\n              children: isPlaying ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M6 19h4V5H6v14zm8-14v14h4V5h-4z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 703,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 702,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M8 5v14l11-7z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 707,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 706,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 689,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                display: \"flex\",\n                alignItems: \"center\",\n                gap: \"8px\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: toggleMute,\n                style: {\n                  background: \"none\",\n                  border: \"none\",\n                  cursor: \"pointer\",\n                  padding: 0,\n                  display: \"flex\",\n                  alignItems: \"center\",\n                  color: \"white\"\n                },\n                children: isMuted || volume === 0 ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"20\",\n                  height: \"20\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 729,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 728,\n                  columnNumber: 21\n                }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                  width: \"20\",\n                  height: \"20\",\n                  viewBox: \"0 0 24 24\",\n                  fill: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    d: \"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 733,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 732,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 715,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"range\",\n                min: \"0\",\n                max: \"1\",\n                step: \"0.05\",\n                value: isMuted ? 0 : volume,\n                onChange: handleLocalVolumeChange,\n                style: {\n                  width: \"70px\",\n                  cursor: \"pointer\",\n                  accentColor: \"#fff\",\n                  height: \"3px\"\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 737,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 714,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                color: \"white\",\n                fontSize: \"0.85rem\",\n                fontWeight: \"400\",\n                opacity: 0.9\n              },\n              children: [formatTime(roomTime), \" / \", formatTime(roomDuration)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 754,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 686,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: \"flex\",\n              alignItems: \"center\",\n              gap: \"20px\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              style: {\n                opacity: 0.5,\n                cursor: \"not-allowed\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 763,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 762,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"svg\", {\n              width: \"20\",\n              height: \"20\",\n              viewBox: \"0 0 24 24\",\n              fill: \"currentColor\",\n              style: {\n                opacity: 0.5,\n                cursor: \"not-allowed\"\n              },\n              children: /*#__PURE__*/_jsxDEV(\"path\", {\n                d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleFullscreen,\n              style: {\n                background: \"none\",\n                border: \"none\",\n                cursor: \"pointer\",\n                padding: 0,\n                display: \"flex\",\n                alignItems: \"center\",\n                color: \"white\"\n              },\n              title: \"Toggle Fullscreen\",\n              children: isFullscreen ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 787,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 786,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                width: \"24\",\n                height: \"24\",\n                viewBox: \"0 0 24 24\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 791,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 790,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 772,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this), !amIStreamer && isStreaming && !showControls && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: 10,\n          right: 10,\n          padding: \"3px 8px\",\n          background: \"rgba(0,0,0,0.7)\",\n          color: \"var(--accent-color, #d4af37)\",\n          fontSize: \"0.68rem\",\n          borderRadius: 4,\n          border: \"1px solid var(--accent-color, #d4af37)\",\n          pointerEvents: \"none\",\n          transition: \"opacity 0.3s\",\n          opacity: 1\n        },\n        children: \"\\uD83D\\uDC65 Synced\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 801,\n        columnNumber: 11\n      }, this), amIStreamer && userList.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          top: 10,\n          left: 10,\n          padding: \"3px 8px\",\n          background: \"rgba(0,0,0,0.7)\",\n          color: \"#4caf50\",\n          fontSize: \"0.68rem\",\n          borderRadius: 4,\n          border: \"1px solid #4caf50\",\n          pointerEvents: \"none\"\n        },\n        children: [\"\\uD83D\\uDC64 \", userList.length - 1, \" viewer\", userList.length !== 2 ? \"s\" : \"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 823,\n        columnNumber: 11\n      }, this), needsInteraction && /*#__PURE__*/_jsxDEV(\"div\", {\n        onClick: handleClickToPlay,\n        style: {\n          position: \"absolute\",\n          inset: 0,\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          background: \"rgba(0,0,0,0.88)\",\n          cursor: \"pointer\",\n          backdropFilter: \"blur(6px)\",\n          zIndex: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            width: 90,\n            height: 90,\n            borderRadius: \"50%\",\n            background: \"var(--accent-color, #d4af37)\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            marginBottom: 20,\n            boxShadow: \"0 4px 24px rgba(212,175,55,0.5)\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            width: \"44\",\n            height: \"44\",\n            viewBox: \"0 0 24 24\",\n            fill: \"white\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              d: \"M8 5v14l11-7z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 872,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 871,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 858,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"var(--accent-color, #d4af37)\",\n            fontSize: \"1.2rem\",\n            fontWeight: 600,\n            marginBottom: 8\n          },\n          children: \"Click to Watch\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 875,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            color: \"#aaa\",\n            fontSize: \"0.85rem\",\n            textAlign: \"center\",\n            maxWidth: \"75%\"\n          },\n          children: \"Browser security requires a click before audio plays.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 885,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 843,\n        columnNumber: 11\n      }, this), !isStreaming && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          position: \"absolute\",\n          inset: 0,\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          color: \"#555\",\n          pointerEvents: \"none\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          width: \"64\",\n          height: \"64\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          strokeWidth: \"1\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          style: {\n            marginBottom: 16,\n            opacity: 0.3\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n            x: \"2\",\n            y: \"2\",\n            width: \"20\",\n            height: \"20\",\n            rx: \"2\",\n            ry: \"2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 923,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"7\",\n            y1: \"2\",\n            x2: \"7\",\n            y2: \"22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 924,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"17\",\n            y1: \"2\",\n            x2: \"17\",\n            y2: \"22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 925,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n            x1: \"2\",\n            y1: \"12\",\n            x2: \"22\",\n            y2: \"12\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 926,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 912,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            fontSize: \"0.9rem\"\n          },\n          children: \"Select a video to begin the show\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 928,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 486,\n    columnNumber: 5\n  }, this);\n}\n_s(VideoPlayer, \"WpacaY6IPcZH7LxO+1qENqvLc3A=\", false, function () {\n  return [useWebRTC, useVideoSync];\n});\n_c = VideoPlayer;\nvar _c;\n$RefreshReg$(_c, \"VideoPlayer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","useMemo","socket","useWebRTC","useVideoSync","jsxDEV","_jsxDEV","VideoPlayer","roomId","username","_s","videoRef","videoContainerRef","statusDotRef","statusTextRef","controlsTimeoutRef","isStreaming","setIsStreaming","streamerId","setStreamerId","needsInteraction","setNeedsInteraction","videoSource","setVideoSource","userList","setUserList","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","isPlaying","setIsPlaying","localSeekTime","setLocalSeekTime","isSeeking","setIsSeeking","cleanRoomId","trim","toUpperCase","amIStreamer","id","setStatus","text","isLive","current","textContent","style","background","startStream","stopStream","remoteStream","peerStates","usingFallback","emitPlay","emitPause","emitSeek","emitVolumeChange","startHeartbeat","stopHeartbeat","isSyncing","roomTime","roomDuration","isHost","_video$srcObject","video","srcObject","console","log","tryPlay","paused","play","then","catch","e","name","muted","onloadedmetadata","states","Object","values","includes","handleStreamStatus","active","setTimeout","emit","handleStreamStarted","handleStreamStopped","src","pause","handleUserList","list","on","off","beginFileStream","videoEl","captureStream","mozCaptureStream","error","_videoEl$captureStrea","_videoEl$captureStrea2","_videoEl$mozCaptureSt","stream","call","tracks","getTracks","map","t","kind","readyState","length","videoTracks","getVideoTracks","audioTracks","getAudioTracks","warn","forEach","contentHint","_","lastPlayState","onplay","onpause","onseeked","currentTime","onvolumechange","handleFileChange","event","file","target","files","url","URL","createObjectURL","requestAnimationFrame","err","startScreenShare","navigator","mediaDevices","getDisplayMedia","width","ideal","height","frameRate","audio","onended","handleStopStreaming","handleClickToPlay","handleMouseMove","clearTimeout","handleFullscreenChange","document","fullscreenElement","addEventListener","removeEventListener","toggleFullscreen","requestFullscreen","message","exitFullscreen","handleLocalVolumeChange","newVol","parseFloat","value","toggleMute","nextMuted","formatTime","seconds","h","Math","floor","m","s","toString","padStart","togglePlay","handleSeekChange","newTime","handleSeekEnd","ref","onMouseMove","display","flexDirection","position","children","padding","justifyContent","alignItems","fontSize","borderBottom","flexShrink","zIndex","gap","borderRadius","fileName","_jsxFileName","lineNumber","columnNumber","color","fontWeight","marginLeft","border","onClick","className","cursor","type","accept","onChange","htmlFor","flex","overflow","undefined","maxHeight","objectFit","controls","autoPlay","playsInline","bottom","left","transform","maxWidth","backdropFilter","transition","opacity","boxShadow","min","max","step","onMouseUp","onTouchEnd","outline","appearance","WebkitAppearance","viewBox","fill","d","accentColor","title","top","right","pointerEvents","inset","marginBottom","textAlign","stroke","strokeWidth","strokeLinecap","strokeLinejoin","x","y","rx","ry","x1","y1","x2","y2","_c","$RefreshReg$"],"sources":["C:/Users/rohit/OneDrive/Desktop/SrtreamMovie/Movie-Party/frontend/src/components/VideoPlayer_v3.js"],"sourcesContent":["/**\r\n * VideoPlayer_v3.js  (v4 architecture, kept as v3 filename for compatibility)\r\n *\r\n * Key improvements over previous version:\r\n *  - Uses useWebRTC hook for all RTCPeerConnection logic (ICE buffering, perfect negotiation)\r\n *  - Uses useVideoSync hook for latency-compensated sync (RTT + playback rate adjustment)\r\n *  - Fixes audio: uses video.captureStream() for file playback (not canvas â€” canvas has no audio)\r\n *  - Fixes flicker: srcObject only assigned when stream ID changes\r\n *  - Prevents re-renders: conn status uses useRef + direct DOM mutation, not useState\r\n *  - All event handlers wrapped in useCallback to avoid re-registration on every render\r\n *  - Viewer controls are read-only overlays (no native controls) to prevent echo events\r\n */\r\n\r\nimport React, {\r\n  useEffect,\r\n  useRef,\r\n  useState,\r\n  useCallback,\r\n  useMemo,\r\n} from \"react\";\r\nimport socket from \"../socket\";\r\nimport { useWebRTC } from \"../hooks/useWebRTC\";\r\nimport { useVideoSync } from \"../hooks/useVideoSync\";\r\n\r\nexport default function VideoPlayer({ roomId, username = \"Viewer\" }) {\r\n  const videoRef = useRef(null);\r\n  const videoContainerRef = useRef(null);\r\n  const statusDotRef = useRef(null);   // DOM ref for status indicator â€” avoids re-render\r\n  const statusTextRef = useRef(null);\r\n  const controlsTimeoutRef = useRef(null);\r\n\r\n  // Stream role state (drives conditional rendering â€” OK to be state)\r\n  const [isStreaming, setIsStreaming] = useState(false);\r\n  const [streamerId, setStreamerId] = useState(null);\r\n  const [needsInteraction, setNeedsInteraction] = useState(false);\r\n  const [videoSource, setVideoSource] = useState(null);\r\n  const [userList, setUserList] = useState([]);\r\n\r\n  // Local UI state (local only, not synced)\r\n  const [volume, setVolume] = useState(1);\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [isFullscreen, setIsFullscreen] = useState(false);\r\n  const [showControls, setShowControls] = useState(true);\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  // We keep local time state only for the host to handle its own slider interaction smoothly\r\n  // Viewers will strictly use roomTime from the sync hook.\r\n  const [localSeekTime, setLocalSeekTime] = useState(0);\r\n  const [isSeeking, setIsSeeking] = useState(false);\r\n\r\n  const cleanRoomId = useMemo(\r\n    () => (roomId ? roomId.trim().toUpperCase() : \"\"),\r\n    [roomId]\r\n  );\r\n\r\n  const amIStreamer = streamerId === socket.id;\r\n\r\n  // â”€â”€ Update status indicator without triggering re-render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const setStatus = useCallback((text, isLive = false) => {\r\n    if (statusTextRef.current) statusTextRef.current.textContent = text;\r\n    if (statusDotRef.current) {\r\n      statusDotRef.current.style.background = isLive ? \"#4caf50\" : \"#ffc107\";\r\n    }\r\n  }, []);\r\n\r\n  // â”€â”€ WebRTC hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const { startStream, stopStream, remoteStream, peerStates, usingFallback } =\r\n    useWebRTC({ roomId: cleanRoomId, socket });\r\n\r\n  // â”€â”€ Sync hook â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const {\r\n    emitPlay,\r\n    emitPause,\r\n    emitSeek,\r\n    emitVolumeChange,\r\n    startHeartbeat,\r\n    stopHeartbeat,\r\n    isSyncing,\r\n    roomTime,\r\n    roomDuration,\r\n  } = useVideoSync({\r\n    socket,\r\n    roomId: cleanRoomId,\r\n    videoRef,\r\n    isHost: amIStreamer,\r\n  });\r\n\r\n  // Sync internal state for host's seek bar when not interacting\r\n  useEffect(() => {\r\n    if (amIStreamer && !isSeeking) {\r\n      setLocalSeekTime(roomTime);\r\n    }\r\n  }, [roomTime, amIStreamer, isSeeking]);\r\n\r\n  // â”€â”€ Assign remote stream to video element (viewer side) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  useEffect(() => {\r\n    const video = videoRef.current;\r\n    if (!video || !remoteStream || amIStreamer) return;\r\n    // Only reassign if stream actually changed â†’ prevents flicker\r\n    if (video.srcObject?.id === remoteStream.id) return;\r\n\r\n    console.log(\"[VideoPlayer] Assigning remote stream to video element\");\r\n    video.srcObject = remoteStream;\r\n\r\n    const tryPlay = () => {\r\n      if (!video.paused) return;\r\n      video\r\n        .play()\r\n        .then(() => {\r\n          setStatus(\"Live\", true);\r\n          setNeedsInteraction(false);\r\n          setIsPlaying(true);\r\n        })\r\n        .catch((e) => {\r\n          if (e.name === \"NotAllowedError\") {\r\n            // Browser blocked autoplay â€” show click-to-play overlay\r\n            video.muted = true;\r\n            video\r\n              .play()\r\n              .then(() => {\r\n                setStatus(\"Live (Muted â€” click ðŸ”Š)\", true);\r\n                setNeedsInteraction(false);\r\n                setIsPlaying(true);\r\n              })\r\n              .catch(() => {\r\n                setStatus(\"Click to Play\", false);\r\n                setNeedsInteraction(true);\r\n                setIsPlaying(false);\r\n              });\r\n          }\r\n        });\r\n    };\r\n\r\n    video.onloadedmetadata = tryPlay;\r\n    tryPlay();\r\n\r\n    return () => {\r\n      video.onloadedmetadata = null;\r\n    };\r\n  }, [remoteStream, amIStreamer, setStatus]);\r\n\r\n  // â”€â”€ Update status when peer connection status changes â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  useEffect(() => {\r\n    const states = Object.values(peerStates);\r\n    if (states.includes(\"connected\")) {\r\n      setStatus(amIStreamer ? \"Hosting\" : \"Live\", true);\r\n    } else if (states.includes(\"connecting\")) {\r\n      setStatus(\"Connectingâ€¦\", false);\r\n    } else if (states.includes(\"failed\")) {\r\n      setStatus(usingFallback ? \"Sync Only (WebRTC failed)\" : \"Failed\", false);\r\n    }\r\n  }, [peerStates, amIStreamer, usingFallback, setStatus]);\r\n\r\n\r\n  // â”€â”€ Socket room events â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  useEffect(() => {\r\n    if (!cleanRoomId) return;\r\n\r\n    const handleStreamStatus = ({ isStreaming: active, streamerId: id }) => {\r\n      setIsStreaming(active);\r\n      setStreamerId(id);\r\n      if (active && id !== socket.id) {\r\n        setStatus(\"Connectingâ€¦\", false);\r\n        // Ask new host to initiate WebRTC connection to us\r\n        setTimeout(() => socket.emit(\"request-stream\", cleanRoomId), 400);\r\n        // Also request latest sync state\r\n        socket.emit(\"request-sync\", cleanRoomId);\r\n      }\r\n    };\r\n\r\n    const handleStreamStarted = ({ streamerId: id }) => {\r\n      setIsStreaming(true);\r\n      setStreamerId(id);\r\n      if (id !== socket.id) {\r\n        setStatus(\"Connectingâ€¦\", false);\r\n        setTimeout(() => socket.emit(\"request-stream\", cleanRoomId), 400);\r\n        socket.emit(\"request-sync\", cleanRoomId);\r\n      }\r\n    };\r\n\r\n    const handleStreamStopped = () => {\r\n      setIsStreaming(false);\r\n      setStreamerId(null);\r\n      setNeedsInteraction(false);\r\n      setStatus(\"Idle\", false);\r\n      stopStream();\r\n      const video = videoRef.current;\r\n      if (video) {\r\n        video.srcObject = null;\r\n        video.src = \"\";\r\n        video.pause();\r\n      }\r\n    };\r\n\r\n    const handleUserList = (list) => setUserList(list);\r\n\r\n    socket.on(\"stream-status\", handleStreamStatus);\r\n    socket.on(\"stream-started\", handleStreamStarted);\r\n    socket.on(\"stream-stopped\", handleStreamStopped);\r\n    socket.on(\"user-list\", handleUserList);\r\n\r\n    socket.emit(\"join-room\", { roomId: cleanRoomId, username: \"Viewer\" });\r\n\r\n    return () => {\r\n      socket.off(\"stream-status\", handleStreamStatus);\r\n      socket.off(\"stream-started\", handleStreamStarted);\r\n      socket.off(\"stream-stopped\", handleStreamStopped);\r\n      socket.off(\"user-list\", handleUserList);\r\n    };\r\n  }, [cleanRoomId, setStatus, stopStream]);\r\n\r\n  // â”€â”€ Capture stream from local video file â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  // Uses video.captureStream() which captures decoded audio + video directly.\r\n  // captureStream() MUST be called after the video has started playing â€”\r\n  // calling it on a paused/unstarted video returns empty/inactive tracks.\r\n  const beginFileStream = useCallback(\r\n    (videoEl) => {\r\n      if (!videoEl.captureStream && !videoEl.mozCaptureStream) {\r\n        console.error(\"[VideoPlayer] captureStream() not supported in this browser\");\r\n        return;\r\n      }\r\n\r\n      // Wait 200 ms after play() so the decoder produces live track frames\r\n      // before we hand the stream to RTCPeerConnection.\r\n      setTimeout(() => {\r\n        const stream =\r\n          videoEl.captureStream?.() ?? videoEl.mozCaptureStream?.();\r\n\r\n        const tracks = stream.getTracks();\r\n        console.log(\r\n          \"[VideoPlayer] captureStream tracks:\",\r\n          tracks.map((t) => `${t.kind}:${t.readyState}`)\r\n        );\r\n\r\n        if (tracks.length === 0) {\r\n          console.error(\"[VideoPlayer] captureStream() returned no tracks! Video may not be playing.\");\r\n          return;\r\n        }\r\n\r\n        const videoTracks = stream.getVideoTracks();\r\n        const audioTracks = stream.getAudioTracks();\r\n\r\n        if (audioTracks.length === 0) {\r\n          console.warn(\"[VideoPlayer] No audio track captured (file may have no audio, or browser restriction).\");\r\n        }\r\n\r\n        // Hint the browser codec selection: \"motion\" is better for video files\r\n        videoTracks.forEach((t) => { try { t.contentHint = \"motion\"; } catch (_) { } });\r\n        audioTracks.forEach((t) => { try { t.contentHint = \"music\"; } catch (_) { } });\r\n\r\n        startStream(stream);\r\n        socket.emit(\"start-stream\", cleanRoomId);\r\n        setStatus(\"Hosting File\", true);\r\n        startHeartbeat();\r\n\r\n        // HOST-side video event listeners\r\n        let lastPlayState = null;\r\n\r\n        videoEl.onplay = () => {\r\n          setIsPlaying(true);\r\n          if (lastPlayState === \"playing\") return;\r\n          lastPlayState = \"playing\";\r\n          emitPlay();\r\n        };\r\n\r\n        videoEl.onpause = () => {\r\n          setIsPlaying(false);\r\n          if (lastPlayState === \"paused\") return;\r\n          lastPlayState = \"paused\";\r\n          emitPause();\r\n        };\r\n\r\n        videoEl.onseeked = () => {\r\n          emitSeek(videoEl.currentTime);\r\n        };\r\n\r\n        videoEl.onvolumechange = () => {\r\n          emitVolumeChange({ muted: videoEl.muted, volume: videoEl.volume });\r\n        };\r\n\r\n        // Initial duration for host state\r\n        setLocalSeekTime(videoEl.currentTime);\r\n\r\n        // â€” Initial Pause â€”\r\n        // The user wants the video to be paused initially after adding it.\r\n        // We play it briefly just to ensure captureStream tracks are active,\r\n        // then pause it so the user can click \"Play/Resume\" manually.\r\n        videoEl.pause();\r\n      }, 200);\r\n    },\r\n    [cleanRoomId, startStream, startHeartbeat, emitPlay, emitPause, emitSeek, emitVolumeChange, setStatus]\r\n  );\r\n\r\n  // â”€â”€ File input handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const handleFileChange = useCallback(\r\n    (event) => {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const url = URL.createObjectURL(file);\r\n      setVideoSource(url);\r\n      setIsStreaming(true);\r\n      setStreamerId(socket.id);\r\n\r\n      // Let state update propagate before accessing video element\r\n      requestAnimationFrame(() => {\r\n        const video = videoRef.current;\r\n        if (!video) return;\r\n        video.src = url;\r\n        video.onloadedmetadata = () => {\r\n          video\r\n            .play()\r\n            .then(() => {\r\n              beginFileStream(video);\r\n            })\r\n            .catch((err) => console.error(\"[VideoPlayer] File play error:\", err));\r\n        };\r\n      });\r\n    },\r\n    [beginFileStream]\r\n  );\r\n\r\n  // â”€â”€ Screen share handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const startScreenShare = useCallback(async () => {\r\n    try {\r\n      const stream = await navigator.mediaDevices.getDisplayMedia({\r\n        video: { width: { ideal: 1920 }, height: { ideal: 1080 }, frameRate: { ideal: 30 } },\r\n        audio: true,\r\n      });\r\n\r\n      startStream(stream);\r\n      socket.emit(\"start-stream\", cleanRoomId);\r\n      setIsStreaming(true);\r\n      setStreamerId(socket.id);\r\n      setStatus(\"Hosting Screen\", true);\r\n      startHeartbeat();\r\n\r\n      // Show local preview\r\n      const video = videoRef.current;\r\n      if (video) {\r\n        video.srcObject = stream;\r\n        video.play().catch(() => { });\r\n      }\r\n\r\n      // Detect when user stops screen share via browser UI\r\n      stream.getVideoTracks()[0].onended = () => {\r\n        handleStopStreaming();\r\n      };\r\n    } catch (err) {\r\n      console.error(\"[VideoPlayer] Screen share error:\", err);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [cleanRoomId, startStream, startHeartbeat, setStatus]);\r\n\r\n  // â”€â”€ Stop streaming handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const handleStopStreaming = useCallback(() => {\r\n    stopStream();\r\n    stopHeartbeat();\r\n    socket.emit(\"stop-stream\", cleanRoomId);\r\n\r\n    const video = videoRef.current;\r\n    if (video) {\r\n      video.srcObject = null;\r\n      video.src = \"\";\r\n      video.pause();\r\n      video.onplay = null;\r\n      video.onpause = null;\r\n      video.onseeked = null;\r\n      video.onvolumechange = null;\r\n    }\r\n\r\n    setVideoSource(null);\r\n    setIsStreaming(false);\r\n    setStreamerId(null);\r\n    setStatus(\"Idle\", false);\r\n  }, [cleanRoomId, stopStream, stopHeartbeat, setStatus]);\r\n\r\n  // â”€â”€ Click-to-play overlay handler â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const handleClickToPlay = useCallback(() => {\r\n    const video = videoRef.current;\r\n    if (!video) return;\r\n    video.muted = false;\r\n    video\r\n      .play()\r\n      .then(() => {\r\n        setNeedsInteraction(false);\r\n        setStatus(\"Live\", true);\r\n      })\r\n      .catch(() => {\r\n        video.muted = true;\r\n        video.play().catch(() => { });\r\n        setNeedsInteraction(false);\r\n        setStatus(\"Live (Muted)\", true);\r\n      });\r\n  }, [setStatus]);\r\n\r\n  // â”€â”€ Auto-hide controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  const handleMouseMove = useCallback(() => {\r\n    setShowControls(true);\r\n    if (controlsTimeoutRef.current) clearTimeout(controlsTimeoutRef.current);\r\n    controlsTimeoutRef.current = setTimeout(() => {\r\n      setShowControls(false);\r\n    }, 3000);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleFullscreenChange = () => {\r\n      setIsFullscreen(!!document.fullscreenElement);\r\n    };\r\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\r\n    return () => {\r\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\r\n      if (controlsTimeoutRef.current) clearTimeout(controlsTimeoutRef.current);\r\n    };\r\n  }, []);\r\n\r\n  const toggleFullscreen = useCallback(() => {\r\n    if (!videoContainerRef.current) return;\r\n    if (!document.fullscreenElement) {\r\n      videoContainerRef.current.requestFullscreen().catch((err) => {\r\n        console.error(`Error attempting to enable full-screen mode: ${err.message}`);\r\n      });\r\n    } else {\r\n      document.exitFullscreen();\r\n    }\r\n  }, []);\r\n\r\n  const handleLocalVolumeChange = useCallback((e) => {\r\n    const newVol = parseFloat(e.target.value);\r\n    setVolume(newVol);\r\n    if (videoRef.current) {\r\n      videoRef.current.volume = newVol;\r\n      videoRef.current.muted = newVol === 0;\r\n      setIsMuted(newVol === 0);\r\n    }\r\n  }, []);\r\n\r\n  const toggleMute = useCallback(() => {\r\n    if (!videoRef.current) return;\r\n    const nextMuted = !isMuted;\r\n    setIsMuted(nextMuted);\r\n    videoRef.current.muted = nextMuted;\r\n    if (!nextMuted && volume === 0) {\r\n      setVolume(0.5);\r\n      videoRef.current.volume = 0.5;\r\n    }\r\n  }, [isMuted, volume]);\r\n\r\n  const formatTime = (seconds) => {\r\n    if (!seconds) return \"0:00\";\r\n    const h = Math.floor(seconds / 3600);\r\n    const m = Math.floor((seconds % 3600) / 60);\r\n    const s = Math.floor(seconds % 60);\r\n    return h > 0\r\n      ? `${h}:${m.toString().padStart(2, \"0\")}:${s.toString().padStart(2, \"0\")}`\r\n      : `${m}:${s.toString().padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const togglePlay = useCallback(() => {\r\n    const video = videoRef.current;\r\n    if (!video || !amIStreamer) return;\r\n    if (video.paused) {\r\n      video.play().catch(console.error);\r\n    } else {\r\n      video.pause();\r\n    }\r\n  }, [amIStreamer]);\r\n\r\n  const handleSeekChange = useCallback((e) => {\r\n    const video = videoRef.current;\r\n    if (!video || !amIStreamer) return;\r\n    const newTime = parseFloat(e.target.value);\r\n    setLocalSeekTime(newTime);\r\n    setIsSeeking(true);\r\n    // Don't update video.currentTime here to avoid lag; do it on mouseUp or use a debounce\r\n    // Actually, updating currentTime here gives better visual feedback if the video is fast.\r\n    video.currentTime = newTime;\r\n  }, [amIStreamer]);\r\n\r\n  const handleSeekEnd = useCallback(() => {\r\n    setIsSeeking(false);\r\n  }, []);\r\n\r\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\r\n  return (\r\n    <div\r\n      ref={videoContainerRef}\r\n      onMouseMove={handleMouseMove}\r\n      style={{\r\n        width: \"100%\",\r\n        height: \"100%\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        background: \"#000\",\r\n        position: \"relative\",\r\n      }}\r\n    >\r\n      {/* â”€â”€ Toolbar â”€â”€ */}\r\n      <div\r\n        style={{\r\n          padding: \"8px 16px\",\r\n          background: \"rgba(0,0,0,0.85)\",\r\n          display: \"flex\",\r\n          justifyContent: \"space-between\",\r\n          alignItems: \"center\",\r\n          fontSize: \"0.78rem\",\r\n          borderBottom: \"1px solid var(--border-color, #333)\",\r\n          flexShrink: 0,\r\n          zIndex: 5,\r\n        }}\r\n      >\r\n        {/* Status indicator */}\r\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n          <div\r\n            ref={statusDotRef}\r\n            style={{\r\n              width: 8,\r\n              height: 8,\r\n              borderRadius: \"50%\",\r\n              background: \"#ffc107\",\r\n              flexShrink: 0,\r\n            }}\r\n          />\r\n          <span style={{ color: \"var(--text-secondary, #aaa)\" }}>Status:</span>\r\n          <span\r\n            ref={statusTextRef}\r\n            style={{ color: \"var(--accent-color, #d4af37)\", fontWeight: \"bold\" }}\r\n          >\r\n            Idle\r\n          </span>\r\n          {usingFallback && (\r\n            <span\r\n              style={{\r\n                marginLeft: 8,\r\n                fontSize: \"0.68rem\",\r\n                color: \"#ff9800\",\r\n                border: \"1px solid #ff9800\",\r\n                padding: \"1px 5px\",\r\n                borderRadius: 3,\r\n              }}\r\n            >\r\n              Sync-only mode\r\n            </span>\r\n          )}\r\n        </div>\r\n\r\n        {/* Controls */}\r\n        {isStreaming ? (\r\n          amIStreamer && (\r\n            <button\r\n              onClick={handleStopStreaming}\r\n              className=\"royal-button\"\r\n              style={{\r\n                padding: \"4px 12px\",\r\n                fontSize: \"0.72rem\",\r\n                background: \"#dc3545\",\r\n                color: \"#fff\",\r\n                border: \"none\",\r\n                borderRadius: 4,\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              Stop Streaming\r\n            </button>\r\n          )\r\n        ) : (\r\n          <div style={{ display: \"flex\", gap: 8 }}>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"video/*\"\r\n              onChange={handleFileChange}\r\n              style={{ display: \"none\" }}\r\n              id=\"video-upload\"\r\n            />\r\n            <label\r\n              htmlFor=\"video-upload\"\r\n              className=\"royal-button\"\r\n              style={{\r\n                padding: \"4px 12px\",\r\n                fontSize: \"0.72rem\",\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              ðŸ“ Local File\r\n            </label>\r\n            <button\r\n              onClick={startScreenShare}\r\n              className=\"royal-button\"\r\n              style={{\r\n                padding: \"4px 12px\",\r\n                fontSize: \"0.72rem\",\r\n                background: \"transparent\",\r\n                border: \"1px solid var(--accent-color, #d4af37)\",\r\n                color: \"var(--accent-color, #d4af37)\",\r\n                borderRadius: 4,\r\n                cursor: \"pointer\",\r\n              }}\r\n            >\r\n              ðŸ–¥ Screen Share\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* â”€â”€ Video Area â”€â”€ */}\r\n      <div\r\n        style={{\r\n          flex: 1,\r\n          position: \"relative\",\r\n          display: \"flex\",\r\n          alignItems: \"center\",\r\n          justifyContent: \"center\",\r\n          background: \"#000\",\r\n          overflow: \"hidden\",\r\n        }}\r\n      >\r\n        <video\r\n          ref={videoRef}\r\n          src={videoSource || undefined}\r\n          style={{\r\n            width: \"100%\",\r\n            height: isFullscreen ? \"100vh\" : \"auto\",\r\n            maxHeight: isFullscreen ? \"100vh\" : \"70vh\",\r\n            objectFit: \"contain\",\r\n          }}\r\n          controls={false} // Custom controls instead\r\n          autoPlay\r\n          playsInline\r\n          muted={amIStreamer && !!videoSource} // host mutes self to avoid echo\r\n        />\r\n\r\n        {/* â”€â”€ Custom Control Bar (Professional Glassmorphism) â”€â”€ */}\r\n        <div\r\n          style={{\r\n            position: \"absolute\",\r\n            bottom: isFullscreen ? 30 : 20,\r\n            left: \"50%\",\r\n            transform: `translate(-50%, ${showControls ? \"0\" : \"100px\"})`,\r\n            width: \"calc(100% - 40px)\",\r\n            maxWidth: \"900px\",\r\n            padding: \"16px 24px\",\r\n            background: \"rgba(10, 10, 10, 0.75)\",\r\n            backdropFilter: \"blur(16px)\",\r\n            borderRadius: \"16px\",\r\n            border: \"1px solid rgba(255,255,255,0.08)\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            gap: \"12px\",\r\n            transition: \"transform 0.5s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.4s\",\r\n            opacity: showControls ? 1 : 0,\r\n            zIndex: 100,\r\n            boxShadow: \"0 12px 40px rgba(0,0,0,0.6)\",\r\n          }}\r\n        >\r\n          {/* Row 1: Professional Seek Bar (Host Only) */}\r\n          {amIStreamer && (\r\n            <div style={{ width: \"100%\", display: \"flex\", alignItems: \"center\", position: \"relative\" }}>\r\n              <input\r\n                type=\"range\"\r\n                min=\"0\"\r\n                max={roomDuration || 100}\r\n                step=\"0.1\"\r\n                value={localSeekTime}\r\n                onChange={handleSeekChange}\r\n                onMouseUp={handleSeekEnd}\r\n                onTouchEnd={handleSeekEnd}\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"5px\",\r\n                  borderRadius: \"5px\",\r\n                  background: `linear-gradient(to right, #ff0000 0%, #ff0000 ${roomDuration > 0 ? (localSeekTime / roomDuration) * 100 : 0\r\n                    }%, #444 ${roomDuration > 0 ? (localSeekTime / roomDuration) * 100 : 0\r\n                    }%, #444 100%)`,\r\n                  outline: \"none\",\r\n                  cursor: \"pointer\",\r\n                  appearance: \"none\",\r\n                  WebkitAppearance: \"none\",\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Row 2: Controls Row */}\r\n          <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n            {/* Left side: Play, Volume, Time */}\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"18px\" }}>\r\n              {/* Play/Pause Button (Host Only) */}\r\n              {amIStreamer && (\r\n                <button\r\n                  onClick={togglePlay}\r\n                  style={{\r\n                    background: \"none\",\r\n                    border: \"none\",\r\n                    cursor: \"pointer\",\r\n                    padding: 0,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  {isPlaying ? (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M6 19h4V5H6v14zm8-14v14h4V5h-4z\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M8 5v14l11-7z\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n              )}\r\n\r\n              {/* Volume Control */}\r\n              <div style={{ display: \"flex\", alignItems: \"center\", gap: \"8px\" }}>\r\n                <button\r\n                  onClick={toggleMute}\r\n                  style={{\r\n                    background: \"none\",\r\n                    border: \"none\",\r\n                    cursor: \"pointer\",\r\n                    padding: 0,\r\n                    display: \"flex\",\r\n                    alignItems: \"center\",\r\n                    color: \"white\",\r\n                  }}\r\n                >\r\n                  {isMuted || volume === 0 ? (\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z\" />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                      <path d=\"M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z\" />\r\n                    </svg>\r\n                  )}\r\n                </button>\r\n                <input\r\n                  type=\"range\"\r\n                  min=\"0\"\r\n                  max=\"1\"\r\n                  step=\"0.05\"\r\n                  value={isMuted ? 0 : volume}\r\n                  onChange={handleLocalVolumeChange}\r\n                  style={{\r\n                    width: \"70px\",\r\n                    cursor: \"pointer\",\r\n                    accentColor: \"#fff\",\r\n                    height: \"3px\",\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {/* Time Display */}\r\n              <div style={{ color: \"white\", fontSize: \"0.85rem\", fontWeight: \"400\", opacity: 0.9 }}>\r\n                {formatTime(roomTime)} / {formatTime(roomDuration)}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Right side: Placeholder icons and Fullscreen */}\r\n            <div style={{ display: \"flex\", alignItems: \"center\", gap: \"20px\" }}>\r\n              {/* CC Icon (Placeholder) */}\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style={{ opacity: 0.5, cursor: \"not-allowed\" }}>\r\n                <path d=\"M19 4H5c-1.11 0-2 .9-2 2v12c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-8 7H9.5v-.5h-2v3h2V13H11v1c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1zm7 0h-1.5v-.5h-2v3h2V13H18v1c0 .55-.45 1-1 1h-3c-.55 0-1-.45-1-1v-4c0-.55.45-1 1-1h3c.55 0 1 .45 1 1v1z\" />\r\n              </svg>\r\n\r\n              {/* Settings Icon (Placeholder) */}\r\n              <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"currentColor\" style={{ opacity: 0.5, cursor: \"not-allowed\" }}>\r\n                <path d=\"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\" />\r\n              </svg>\r\n\r\n              {/* Fullscreen Toggle */}\r\n              <button\r\n                onClick={toggleFullscreen}\r\n                style={{\r\n                  background: \"none\",\r\n                  border: \"none\",\r\n                  cursor: \"pointer\",\r\n                  padding: 0,\r\n                  display: \"flex\",\r\n                  alignItems: \"center\",\r\n                  color: \"white\",\r\n                }}\r\n                title=\"Toggle Fullscreen\"\r\n              >\r\n                {isFullscreen ? (\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                    <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\r\n                    <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Viewer \"Synced\" badge (only top-right) */}\r\n        {!amIStreamer && isStreaming && !showControls && (\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              top: 10,\r\n              right: 10,\r\n              padding: \"3px 8px\",\r\n              background: \"rgba(0,0,0,0.7)\",\r\n              color: \"var(--accent-color, #d4af37)\",\r\n              fontSize: \"0.68rem\",\r\n              borderRadius: 4,\r\n              border: \"1px solid var(--accent-color, #d4af37)\",\r\n              pointerEvents: \"none\",\r\n              transition: \"opacity 0.3s\",\r\n              opacity: 1,\r\n            }}\r\n          >\r\n            ðŸ‘¥ Synced\r\n          </div>\r\n        )}\r\n\r\n        {/* Peer count badge (host) */}\r\n        {amIStreamer && userList.length > 1 && (\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              top: 10,\r\n              left: 10,\r\n              padding: \"3px 8px\",\r\n              background: \"rgba(0,0,0,0.7)\",\r\n              color: \"#4caf50\",\r\n              fontSize: \"0.68rem\",\r\n              borderRadius: 4,\r\n              border: \"1px solid #4caf50\",\r\n              pointerEvents: \"none\",\r\n            }}\r\n          >\r\n            ðŸ‘¤ {userList.length - 1} viewer{userList.length !== 2 ? \"s\" : \"\"}\r\n          </div>\r\n        )}\r\n\r\n        {/* Click-to-play overlay */}\r\n        {needsInteraction && (\r\n          <div\r\n            onClick={handleClickToPlay}\r\n            style={{\r\n              position: \"absolute\",\r\n              inset: 0,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              background: \"rgba(0,0,0,0.88)\",\r\n              cursor: \"pointer\",\r\n              backdropFilter: \"blur(6px)\",\r\n              zIndex: 10,\r\n            }}\r\n          >\r\n            <div\r\n              style={{\r\n                width: 90,\r\n                height: 90,\r\n                borderRadius: \"50%\",\r\n                background: \"var(--accent-color, #d4af37)\",\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                justifyContent: \"center\",\r\n                marginBottom: 20,\r\n                boxShadow: \"0 4px 24px rgba(212,175,55,0.5)\",\r\n              }}\r\n            >\r\n              <svg width=\"44\" height=\"44\" viewBox=\"0 0 24 24\" fill=\"white\">\r\n                <path d=\"M8 5v14l11-7z\" />\r\n              </svg>\r\n            </div>\r\n            <p\r\n              style={{\r\n                color: \"var(--accent-color, #d4af37)\",\r\n                fontSize: \"1.2rem\",\r\n                fontWeight: 600,\r\n                marginBottom: 8,\r\n              }}\r\n            >\r\n              Click to Watch\r\n            </p>\r\n            <p\r\n              style={{\r\n                color: \"#aaa\",\r\n                fontSize: \"0.85rem\",\r\n                textAlign: \"center\",\r\n                maxWidth: \"75%\",\r\n              }}\r\n            >\r\n              Browser security requires a click before audio plays.\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        {/* No stream idle placeholder */}\r\n        {!isStreaming && (\r\n          <div\r\n            style={{\r\n              position: \"absolute\",\r\n              inset: 0,\r\n              display: \"flex\",\r\n              flexDirection: \"column\",\r\n              justifyContent: \"center\",\r\n              alignItems: \"center\",\r\n              color: \"#555\",\r\n              pointerEvents: \"none\",\r\n            }}\r\n          >\r\n            <svg\r\n              width=\"64\"\r\n              height=\"64\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              strokeWidth=\"1\"\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              style={{ marginBottom: 16, opacity: 0.3 }}\r\n            >\r\n              <rect x=\"2\" y=\"2\" width=\"20\" height=\"20\" rx=\"2\" ry=\"2\" />\r\n              <line x1=\"7\" y1=\"2\" x2=\"7\" y2=\"22\" />\r\n              <line x1=\"17\" y1=\"2\" x2=\"17\" y2=\"22\" />\r\n              <line x1=\"2\" y1=\"12\" x2=\"22\" y2=\"12\" />\r\n            </svg>\r\n            <p style={{ fontSize: \"0.9rem\" }}>Select a video to begin the show</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}